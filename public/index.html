<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سامحيني يا قلبي - رسالة حب من القلب</title>
    <style>
        :root {
            --primary-pink: #f8e8f0;
            --soft-cream: #fef7f0;
            --mint-green: #e8f5f0;
            --lavender: #f0e8f8;
            --rose-gold: #f4d4c7;
            --text-dark: #4a4a4a;
            --text-soft: #6b6b6b;
            --shadow-soft: 0 8px 32px rgba(255, 182, 193, 0.15);
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--soft-cream) 0%, var(--primary-pink) 50%, var(--mint-green) 100%);
            min-height: 100vh;
            color: var(--text-dark);
            overflow-x: hidden;
            position: relative;
        }

        /* خلفية متحركة - قطط وأوركيد */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            opacity: 0.6;
        }

        .bg-element {
            position: absolute;
            animation: float 15s ease-in-out infinite;
        }

        .cat-silhouette {
            font-size: 24px;
            color: var(--text-soft);
            opacity: 0.3;
        }

        .orchid-flower {
            font-size: 20px;
            color: #d8b4fe;
            opacity: 0.4;
        }

        .bokeh-dot {
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, rgba(255, 182, 193, 0.6), transparent);
            border-radius: 50%;
            opacity: 0.5;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(2deg); }
            50% { transform: translateY(-10px) rotate(-1deg); }
            75% { transform: translateY(-30px) rotate(1deg); }
        }

        /* شريط التحكم العلوي */
        .control-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 12px 16px;
            display: flex;
            gap: 12px;
            z-index: 1000;
            box-shadow: var(--shadow-soft);
        }

        .control-btn {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            padding: 8px;
            border-radius: 12px;
            transition: all 0.3s ease;
            color: var(--text-dark);
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        /* شريط التنقل الجانبي */
        .nav-dots {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 1000;
        }

        .nav-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-dot.active {
            background: var(--rose-gold);
            transform: scale(1.2);
        }

        /* المحتوى الرئيسي */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 0;
            position: relative;
        }

        /* رأس الصفحة */
        .hero {
            text-align: center;
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border-radius: 32px;
            padding: 60px 40px;
            margin: 20px;
            box-shadow: var(--shadow-soft);
            border: 1px solid var(--glass-border);
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            color: #e91e63;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .hero p {
            font-size: 1.3rem;
            color: var(--text-soft);
            line-height: 1.6;
            margin-bottom: 30px;
        }

        /* أوسكار القط */
        .oscar-mascot {
            font-size: 4rem;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .oscar-mascot:hover {
            transform: scale(1.1);
            animation: purr 0.5s ease-in-out;
        }

        @keyframes purr {
            0%, 100% { transform: scale(1.1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(2deg); }
            75% { transform: scale(1.1) rotate(-2deg); }
        }

        /* بطاقات الأقسام */
        .section-card {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border-radius: 24px;
            padding: 40px;
            margin: 20px;
            box-shadow: var(--shadow-soft);
            border: 1px solid var(--glass-border);
            width: 100%;
            max-width: 600px;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 600;
            color: #e91e63;
            margin-bottom: 20px;
            text-align: center;
        }

        /* حديقة الأوركيد المصغرة */
        .orchid-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }

        .orchid-pot {
            text-align: center;
            background: var(--soft-cream);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .orchid-pot:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-soft);
        }

        .orchid-icon {
            font-size: 3rem;
            margin-bottom: 10px;
            display: block;
        }

        .orchid-progress {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #e91e63, #f06292);
            width: 0%;
            transition: width 0.5s ease;
        }

        .care-buttons {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            gap: 8px;
        }

        .care-btn {
            background: var(--rose-gold);
            border: none;
            border-radius: 12px;
            padding: 8px 12px;
            font-size: 0.9rem;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .care-btn:hover {
            background: #f4a261;
            transform: scale(1.05);
        }

        /* لعبة إطعام أوسكار */
        .oscar-game {
            text-align: center;
            position: relative;
        }

        .oscar-character {
            font-size: 5rem;
            margin: 20px 0;
            position: relative;
        }

        .food-items {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .food-item {
            font-size: 2.5rem;
            cursor: grab;
            padding: 10px;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .food-item:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.2);
        }

        .food-item.dragging {
            cursor: grabbing;
            opacity: 0.7;
            transform: scale(1.2);
        }

        /* مهام اللطف */
        .kindness-quests {
            text-align: right;
        }

        .quest-item {
            background: var(--lavender);
            border-radius: 16px;
            padding: 15px 20px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .quest-item:hover {
            transform: translateX(-5px);
            box-shadow: var(--shadow-soft);
        }

        .quest-item.completed {
            background: var(--mint-green);
            opacity: 0.8;
        }

        .quest-checkbox {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #e91e63;
            margin-left: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .quest-item.completed .quest-checkbox {
            background: #e91e63;
        }

        /* صندوق الرسائل */
        .mailbox {
            text-align: center;
        }

        .message-display {
            background: var(--soft-cream);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            line-height: 1.6;
            border: 2px dashed #e91e63;
        }

        .mailbox-btn {
            background: var(--rose-gold);
            border: none;
            border-radius: 16px;
            padding: 15px 30px;
            font-size: 1.1rem;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .mailbox-btn:hover {
            background: #f4a261;
            transform: translateY(-2px);
            box-shadow: var(--shadow-soft);
        }

        /* زاوية الفلسفة */
        .philosophy-carousel {
            text-align: center;
            position: relative;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .philosophy-quote {
            font-size: 1.4rem;
            font-style: italic;
            color: var(--text-soft);
            line-height: 1.8;
            opacity: 0;
            transition: opacity 0.5s ease;
            position: absolute;
            width: 100%;
        }

        .philosophy-quote.active {
            opacity: 1;
        }

        .philosophy-ornament {
            font-size: 2rem;
            margin: 0 10px;
            color: #d8b4fe;
        }

        /* مؤقت الهدوء */
        .calm-timer {
            text-align: center;
        }

        .breathing-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--mint-green), var(--lavender));
            margin: 30px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .breathing-circle.breathing {
            animation: breathe 4s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .timer-controls {
            margin-top: 20px;
        }

        .timer-btn {
            background: var(--mint-green);
            border: none;
            border-radius: 16px;
            padding: 12px 24px;
            font-size: 1rem;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .timer-btn:hover {
            background: #a7f3d0;
            transform: scale(1.05);
        }

        /* مؤشر التقدم العام */
        .progress-hearts {
            position: fixed;
            top: 20px;
            left: 20px;
            display: flex;
            gap: 5px;
            z-index: 1000;
        }

        .progress-heart {
            font-size: 1.5rem;
            color: rgba(233, 30, 99, 0.3);
            transition: all 0.3s ease;
        }

        .progress-heart.filled {
            color: #e91e63;
            animation: heartbeat 1s ease-in-out;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* تأثيرات الاحتفال */
        .celebration {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
        }

        .floating-heart {
            position: absolute;
            font-size: 1.5rem;
            color: #e91e63;
            animation: floatUp 3s ease-out forwards;
        }

        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-200px) scale(0.5);
            }
        }

        /* رسالة الترحيب */
        .welcome-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .welcome-content {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 40px;
            text-align: center;
            max-width: 500px;
            margin: 20px;
            box-shadow: var(--shadow-soft);
            border: 1px solid var(--glass-border);
        }

        .welcome-btn {
            background: #e91e63;
            color: white;
            border: none;
            border-radius: 16px;
            padding: 15px 30px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .welcome-btn:hover {
            background: #c2185b;
            transform: translateY(-2px);
        }

        /* تجاوب الموبايل */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .section-card {
                padding: 25px;
                margin: 10px;
            }
            
            .orchid-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .control-panel {
                top: 10px;
                right: 10px;
                padding: 8px 12px;
                gap: 8px;
            }
            
            .nav-dots {
                display: none;
            }
        }

        /* تقليل الحركة */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .calm-mode {
            filter: brightness(0.8);
        }

        .calm-mode .animated-bg {
            opacity: 0.3;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- الخلفية المتحركة -->
    <div class="animated-bg" id="animatedBg"></div>

    <!-- شريط التحكم العلوي -->
    <div class="control-panel">
        <button class="control-btn" id="calmToggle" title="وضع الهدوء">🧘‍♀️</button>
        <button class="control-btn" id="soundToggle" title="أصوات الطبيعة">🔇</button>
        <button class="control-btn" id="resetProgress" title="إعادة التقدم">🔄</button>
    </div>

    <!-- مؤشر التقدم العام -->
    <div class="progress-hearts" id="progressHearts">
        <span class="progress-heart">♥</span>
        <span class="progress-heart">♥</span>
        <span class="progress-heart">♥</span>
        <span class="progress-heart">♥</span>
        <span class="progress-heart">♥</span>
    </div>

    <!-- شريط التنقل الجانبي -->
    <div class="nav-dots">
        <div class="nav-dot active" data-section="hero"></div>
        <div class="nav-dot" data-section="garden"></div>
        <div class="nav-dot" data-section="oscar"></div>
        <div class="nav-dot" data-section="quests"></div>
        <div class="nav-dot" data-section="mailbox"></div>
        <div class="nav-dot" data-section="philosophy"></div>
        <div class="nav-dot" data-section="timer"></div>
    </div>

    <div class="container">
        <!-- رأس الصفحة -->
        <section id="hero" class="hero">
            <h1>سامحيني يا قلبي</h1>
            <p>أنا آسف... أتعلّم كل يوم كيف أصون ابتسامتك. دعينا نزرع الهدوء معاً.</p>
            <div class="oscar-mascot" id="oscarMascot">🐱</div>
            <p style="font-size: 1rem; color: var(--text-soft);">أوسكار يرسل لكِ أحر التحيات ♥</p>
        </section>

        <!-- حديقة الأوركيد المصغرة -->
        <section id="garden">
            <div class="section-card">
                <h2 class="section-title">حديقة الأوركيد السحرية 🌺</h2>
                <p style="text-align: center; margin-bottom: 20px;">اعتني بالأوركيد الجميلة واحصلي على قلوب متطايرة</p>
                <div class="orchid-grid">
                    <div class="orchid-pot" data-orchid="0">
                        <span class="orchid-icon">🌱</span>
                        <div class="orchid-progress">
                            <div class="progress-fill"></div>
                        </div>
                        <div class="care-buttons">
                            <button class="care-btn" data-action="water">سقي</button>
                            <button class="care-btn" data-action="light">ضوء</button>
                            <button class="care-btn" data-action="care">عناية</button>
                        </div>
                    </div>
                    <div class="orchid-pot" data-orchid="1">
                        <span class="orchid-icon">🌱</span>
                        <div class="orchid-progress">
                            <div class="progress-fill"></div>
                        </div>
                        <div class="care-buttons">
                            <button class="care-btn" data-action="water">سقي</button>
                            <button class="care-btn" data-action="light">ضوء</button>
                            <button class="care-btn" data-action="care">عناية</button>
                        </div>
                    </div>
                    <div class="orchid-pot" data-orchid="2">
                        <span class="orchid-icon">🌱</span>
                        <div class="orchid-progress">
                            <div class="progress-fill"></div>
                        </div>
                        <div class="care-buttons">
                            <button class="care-btn" data-action="water">سقي</button>
                            <button class="care-btn" data-action="light">ضوء</button>
                            <button class="care-btn" data-action="care">عناية</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- لعبة إطعام أوسكار -->
        <section id="oscar">
            <div class="section-card">
                <h2 class="section-title">أطعمي أوسكار الحبيب 🐱</h2>
                <div class="oscar-game">
                    <p style="text-align: center; margin-bottom: 20px;">اسحبي الطعام نحو أوسكار ليشكرك!</p>
                    <div class="oscar-character" id="oscarCharacter">🐱</div>
                    <div class="food-items">
                        <div class="food-item" draggable="true" data-food="fish">🐟</div>
                        <div class="food-item" draggable="true" data-food="milk">🥛</div>
                        <div class="food-item" draggable="true" data-food="treat">🦴</div>
                    </div>
                    <p style="text-align: center; font-size: 0.9rem; color: var(--text-soft); margin-top: 15px;" id="oscarMessage">أوسكار جائع قليلاً...</p>
                </div>
            </div>
        </section>

        <!-- مهام اللطف -->
        <section id="quests">
            <div class="section-card">
                <h2 class="section-title">مهام اللطف اليومية 💝</h2>
                <p style="text-align: center; margin-bottom: 20px;">أكملي المهام لتحصلي على رسائل اعتذار خاصة</p>
                <div class="kindness-quests">
                    <div class="quest-item" data-quest="0">
                        <span>أرسلي رسالة امتنان اليوم</span>
                        <div class="quest-checkbox"></div>
                    </div>
                    <div class="quest-item" data-quest="1">
                        <span>خذي نفساً عميقاً ٣ مرات معاً</span>
                        <div class="quest-checkbox"></div>
                    </div>
                    <div class="quest-item" data-quest="2">
                        <span>استراحة شاي أو قهوة هادئة</span>
                        <div class="quest-checkbox"></div>
                    </div>
                    <div class="quest-item" data-quest="3">
                        <span>ابتسمي لنفسكِ في المرآة</span>
                        <div class="quest-checkbox"></div>
                    </div>
                    <div class="quest-item" data-quest="4">
                        <span>اقرئي شيئاً يسعدكِ</span>
                        <div class="quest-checkbox"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- صندوق الرسائل -->
        <section id="mailbox">
            <div class="section-card">
                <h2 class="section-title">صندوق رسائل الاعتذار 💌</h2>
                <div class="mailbox">
                    <div class="message-display" id="messageDisplay">اضغطي على "رسالة عشوائية" لتقرئي رسالة مليئة بالحب</div>
                    <button class="mailbox-btn" id="randomMessage">رسالة عشوائية</button>
                    <button class="mailbox-btn" id="newMessage">رسالة جديدة</button>
                </div>
            </div>
        </section>

        <!-- زاوية الفلسفة -->
        <section id="philosophy">
            <div class="section-card">
                <h2 class="section-title">زاوية الفلسفة والحكمة 🌸</h2>
                <div class="philosophy-carousel">
                    <div class="philosophy-quote active">
                        <span class="philosophy-ornament">🌺</span>
                        قوّة الحبّ في الصفح
                        <span class="philosophy-ornament">🌺</span>
                    </div>
                    <div class="philosophy-quote">
                        <span class="philosophy-ornament">🐱</span>
                        نتعلّم من الزلّات لنُصبح ألين
                        <span class="philosophy-ornament">🐱</span>
                    </div>
                    <div class="philosophy-quote">
                        <span class="philosophy-ornament">🌺</span>
                        الهدوء يفتح باب الفهم
                        <span class="philosophy-ornament">🌺</span>
                    </div>
                    <div class="philosophy-quote">
                        <span class="philosophy-ornament">🐱</span>
                        من عرف نفسه هان عليه غضبه
                        <span class="philosophy-ornament">🐱</span>
                    </div>
                    <div class="philosophy-quote">
                        <span class="philosophy-ornament">🌺</span>
                        الحب يبني والندم يصلح
                        <span class="philosophy-ornament">🌺</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- مؤقت الهدوء -->
        <section id="timer">
            <div class="section-card">
                <h2 class="section-title">مؤقّت الهدوء والتنفس 🧘‍♀️</h2>
                <div class="calm-timer">
                    <p style="text-align: center; margin-bottom: 20px;">تنفسي معي لدقائق من السكون</p>
                    <div class="breathing-circle" id="breathingCircle">
                        <span id="breathingText">ابدئي</span>
                    </div>
                    <div class="timer-controls">
                        <button class="timer-btn" id="startTimer">بدء التنفس</button>
                        <button class="timer-btn" id="stopTimer">توقف</button>
                    </div>
                    <p style="text-align: center; font-size: 0.9rem; color: var(--text-soft); margin-top: 20px;" id="timerMessage"></p>
                </div>
            </div>
        </section>
    </div>

    <!-- رسالة الترحيب -->
    <div class="welcome-modal" id="welcomeModal">
        <div class="welcome-content">
            <h2 style="color: #e91e63; margin-bottom: 20px;">أهلاً وسهلاً حبيبتي ♥</h2>
            <p style="line-height: 1.6; margin-bottom: 20px;">
                هذا موقع صغير مليء بالحب خصيصاً لكِ...<br>
                أردت أن أقول لكِ كم أنا آسف، وكم أحبك<br>
                أوسكار وأنا ننتظر ابتسامتكِ الجميلة
            </p>
            <button class="welcome-btn" id="startJourney">ابدئي الرحلة ♥</button>
        </div>
    </div>

    <script>
        // البيانات والحالة العامة
        const gameState = {
            orchids: [0, 0, 0], // تقدم كل أوركيد (0-100)
            questsCompleted: [],
            oscarFed: false,
            calmMode: false,
            soundEnabled: false,
            unlockedMessages: 0
        };

        // رسائل الاعتذار العشوائية
        const apologyMessages = [
            "أنتِ راحتي الأولى والأخيرة ♥",
            "أعدكِ أن أصون قلبك بحذر أكبر",
            "وجودكِ يجمّل عالمي كله",
            "أوسكار وأنا نحبّ ابتسامتكِ أكثر من أي شيء",
            "كل يوم معكِ درس في الجمال",
            "أنتِ سر سعادتي وهدوء قلبي",
            "أحبكِ حباً يملأ الكون كله",
            "معذرة إن كنت سبب حزنكِ يوماً",
            "أنتِ أجمل هدية حصلت عليها في الحياة",
            "قلبكِ محل إقامتي الدائمة",
            "أحلامي كلها مرسومة بألوان عينيكِ",
            "أنتِ النور الذي يضيء طريقي",
            "حبيبتي، أنتِ أثمن من كل كنوز الدنيا",
            "ابتسامتكِ تشفي جراح روحي",
            "أنتِ المعنى الحقيقي للحب في قاموسي",
            "كل نفس أتنفسه هو شكر لوجودكِ",
            "أنتِ السكينة التي تهدئ عاصفة قلبي",
            "حبكِ علّمني معنى الحنان الحقيقي",
            "أنتِ الأمان الذي أحتضنه كل ليلة",
            "وجودكِ يحول الأيام العادية إلى احتفال",
            "أنتِ شمسي التي تشرق في قلبي كل صباح",
            "حبيبتي، أنتِ أجمل قصيدة كتبتها الحياة",
            "أنتِ الحلم الذي تحقق واستمر إلى الأبد",
            "قلبكِ بيتي الذي لا أريد مغادرته أبداً",
            "أنتِ الهدية التي لم أكن أستحقها",
            "حبكِ يجعلني أفضل نسخة من نفسي",
            "أنتِ الربيع الدائم في حديقة قلبي",
            "وجودكِ يذكرني أن الجنة موجودة على الأرض",
            "أنتِ النغمة الحلوة التي تعزف في أذني",
            "حبيبتي، أنتِ السر وراء كل ابتسامة لي",
            "أحبكِ حباً يتجدد مع كل نبضة قلب"
        ];

        // الاقتباسات الفلسفية
        const philosophyQuotes = [
            "قوّة الحبّ في الصفح",
            "نتعلّم من الزلّات لنُصبح ألين", 
            "الهدوء يفتح باب الفهم",
            "من عرف نفسه هان عليه غضبه",
            "الحب يبني والندم يصلح",
            "في الصمت حكمة وفي الكلمة مسؤولية",
            "القلب العاقل لا يحقد طويلاً",
            "الصبر مفتاح الفرج والتفاهم",
            "كل خطأ درس نحو الكمال",
            "المحبة لغة يفهمها كل قلب"
        ];

        // رسائل المهام المفتوحة
        const questMessages = [
            "شكراً لأنكِ تشاركيني رحلة اللطف هذه ♥",
            "تنفسكِ الهادئ يملأ المكان بالسكينة",
            "استراحتكِ الجميلة تذكرني بأهمية اللحظات البسيطة",
            "ابتسامتكِ في المرآة تعكس جمال روحكِ",
            "قراءتكِ الممتعة تضيء عقلكِ الجميل"
        ];

        // تهيئة الموقع عند التحميل
        document.addEventListener('DOMContentLoaded', function() {
            loadGameState();
            initializeAnimatedBackground();
            initializeEventListeners();
            startPhilosophyCarousel();
            updateProgressDisplay();
        });

        // تحميل حالة اللعبة من localStorage
        function loadGameState() {
            const saved = localStorage.getItem('apologyWebsite');
            if (saved) {
                Object.assign(gameState, JSON.parse(saved));
                restoreOrchidProgress();
                restoreQuestProgress();
            }
        }

        // حفظ حالة اللعبة
        function saveGameState() {
            localStorage.setItem('apologyWebsite', JSON.stringify(gameState));
        }

        // إنشاء الخلفية المتحركة
        function initializeAnimatedBackground() {
            const bg = document.getElementById('animatedBg');
            
            // إضافة قطط
            for (let i = 0; i < 15; i++) {
                const cat = document.createElement('div');
                cat.className = 'bg-element cat-silhouette';
                cat.innerHTML = '🐱';
                cat.style.left = Math.random() * 100 + '%';
                cat.style.top = Math.random() * 100 + '%';
                cat.style.animationDelay = Math.random() * 15 + 's';
                bg.appendChild(cat);
            }

            // إضافة أوركيد
            for (let i = 0; i < 12; i++) {
                const orchid = document.createElement('div');
                orchid.className = 'bg-element orchid-flower';
                orchid.innerHTML = '🌺';
                orchid.style.left = Math.random() * 100 + '%';
                orchid.style.top = Math.random() * 100 + '%';
                orchid.style.animationDelay = Math.random() * 15 + 's';
                bg.appendChild(orchid);
            }

            // إضافة نقاط bokeh
            for (let i = 0; i < 20; i++) {
                const dot = document.createElement('div');
                dot.className = 'bg-element bokeh-dot';
                dot.style.left = Math.random() * 100 + '%';
                dot.style.top = Math.random() * 100 + '%';
                dot.style.animationDelay = Math.random() * 15 + 's';
                bg.appendChild(dot);
            }
        }

        // إضافة مستمعي الأحداث
        function initializeEventListeners() {
            // زر البداية
            document.getElementById('startJourney').addEventListener('click', closeWelcomeModal);

            // أزرار التحكم
            document.getElementById('calmToggle').addEventListener('click', toggleCalmMode);
            document.getElementById('soundToggle').addEventListener('click', toggleSound);
            document.getElementById('resetProgress').addEventListener('click', resetProgress);

            // أوسكار المسكوت
            document.getElementById('oscarMascot').addEventListener('click', playOscarSound);

            // أزرار العناية بالأوركيد
            document.querySelectorAll('.care-btn').forEach(btn => {
                btn.addEventListener('click', handleOrchidCare);
            });

            // مهام اللطف
            document.querySelectorAll('.quest-item').forEach(item => {
                item.addEventListener('click', handleQuestComplete);
            });

            // صندوق الرسائل
            document.getElementById('randomMessage').addEventListener('click', showRandomMessage);
            document.getElementById('newMessage').addEventListener('click', showNewMessage);

            // مؤقت التنفس
            document.getElementById('startTimer').addEventListener('click', startBreathingTimer);
            document.getElementById('stopTimer').addEventListener('click', stopBreathingTimer);

            // لعبة السحب والإفلات
            initializeDragAndDrop();

            // التنقل السلس
            document.querySelectorAll('.nav-dot').forEach(dot => {
                dot.addEventListener('click', smoothScroll);
            });

            // تحديث النقاط النشطة عند التمرير
            window.addEventListener('scroll', updateActiveNavDot);
        }

        // إغلاق رسالة الترحيب
        function closeWelcomeModal() {
            document.getElementById('welcomeModal').style.display = 'none';
        }

        // تبديل وضع الهدوء
        function toggleCalmMode() {
            gameState.calmMode = !gameState.calmMode;
            document.body.classList.toggle('calm-mode', gameState.calmMode);
            
            const btn = document.getElementById('calmToggle');
            btn.textContent = gameState.calmMode ? '😌' : '🧘‍♀️';
            
            saveGameState();
        }

        // تبديل الأصوات
        function toggleSound() {
            gameState.soundEnabled = !gameState.soundEnabled;
            const btn = document.getElementById('soundToggle');
            btn.textContent = gameState.soundEnabled ? '🔊' : '🔇';
            
            // هنا يمكن إضافة منطق تشغيل أصوات الطبيعة
            saveGameState();
        }

        // إعادة تعيين التقدم
        function resetProgress() {
            if (confirm('هل أنتِ متأكدة من إعادة تعيين كل التقدم؟')) {
                Object.assign(gameState, {
                    orchids: [0, 0, 0],
                    questsCompleted: [],
                    oscarFed: false,
                    unlockedMessages: 0
                });
                
                // إعادة تعيين UI
                document.querySelectorAll('.progress-fill').forEach(fill => {
                    fill.style.width = '0%';
                });
                document.querySelectorAll('.orchid-icon').forEach(icon => {
                    icon.textContent = '🌱';
                });
                document.querySelectorAll('.quest-item').forEach(item => {
                    item.classList.remove('completed');
                    item.querySelector('.quest-checkbox').textContent = '';
                });
                
                updateProgressDisplay();
                saveGameState();
                
                showCelebration('تم إعادة تعيين التقدم! 🔄');
            }
        }

        // صوت أوسكار
        function playOscarSound() {
            showCelebration('مياو~ أوسكار يحبكِ! 🐱♥');
        }

        // العناية بالأوركيد
        function handleOrchidCare(e) {
            const orchidIndex = parseInt(e.target.closest('.orchid-pot').dataset.orchid);
            const action = e.target.dataset.action;
            
            // زيادة التقدم
            gameState.orchids[orchidIndex] = Math.min(100, gameState.orchids[orchidIndex] + 25);
            
            // تحديث شريط التقدم
            const progressFill = e.target.closest('.orchid-pot').querySelector('.progress-fill');
            progressFill.style.width = gameState.orchids[orchidIndex] + '%';
            
            // إذا اكتمل النمو
            if (gameState.orchids[orchidIndex] === 100) {
                const orchidIcon = e.target.closest('.orchid-pot').querySelector('.orchid-icon');
                orchidIcon.textContent = '🌺';
                showCelebration('زهرت الأوركيد! 🌺✨', e.target.getBoundingClientRect());
                updateProgressDisplay();
            }
            
            saveGameState();
            
            // رسائل تشجيع
            const messages = {
                water: 'سقي رائع! 💧',
                light: 'ضوء جميل! ☀️', 
                care: 'عناية مميزة! 💖'
            };
            
            showCelebration(messages[action], e.target.getBoundingClientRect());
        }

        // إكمال المهام
        function handleQuestComplete(e) {
            const questIndex = parseInt(e.currentTarget.dataset.quest);
            
            if (!gameState.questsCompleted.includes(questIndex)) {
                gameState.questsCompleted.push(questIndex);
                e.currentTarget.classList.add('completed');
                e.currentTarget.querySelector('.quest-checkbox').textContent = '✓';
                
                // فتح رسالة جديدة
                gameState.unlockedMessages++;
                updateProgressDisplay();
                saveGameState();
                
                showCelebration('مهمة مكتملة! رسالة جديدة متاحة 💌');
                
                // عرض رسالة المهمة
                setTimeout(() => {
                    if (questMessages[questIndex]) {
                        showMessage(questMessages[questIndex]);
                    }
                }, 1000);
            }
        }

        // عرض رسالة عشوائية
        function showRandomMessage() {
            const randomIndex = Math.floor(Math.random() * apologyMessages.length);
            showMessage(apologyMessages[randomIndex]);
        }

        // عرض رسالة جديدة (من المفتوحة)
        function showNewMessage() {
            if (gameState.unlockedMessages > 0) {
                const messageIndex = Math.min(gameState.unlockedMessages - 1, apologyMessages.length - 1);
                showMessage(apologyMessages[messageIndex]);
            } else {
                showMessage("أكملي المهام أولاً لتحصلي على رسائل جديدة ♥");
            }
        }

        // عرض رسالة في صندوق الرسائل
        function showMessage(message) {
            const display = document.getElementById('messageDisplay');
            display.style.opacity = '0';
            
            setTimeout(() => {
                display.textContent = message;
                display.style.opacity = '1';
            }, 300);
        }

        // بدء دائرة الفلسفة
        function startPhilosophyCarousel() {
            let currentQuote = 0;
            const quotes = document.querySelectorAll('.philosophy-quote');
            
            setInterval(() => {
                quotes[currentQuote].classList.remove('active');
                currentQuote = (currentQuote + 1) % quotes.length;
                quotes[currentQuote].classList.add('active');
            }, 4000);
        }

        // مؤقت التنفس
        let breathingInterval;
        let breathingTimeout;

        function startBreathingTimer() {
            const circle = document.getElementById('breathingCircle');
            const text = document.getElementById('breathingText');
            const message = document.getElementById('timerMessage');
            
            circle.classList.add('breathing');
            let phase = 0; // 0: شهيق, 1: زفير
            
            text.textContent = 'شهيق...';
            message.textContent = 'تنفسي معي بهدوء...';
            
            breathingInterval = setInterval(() => {
                phase = 1 - phase;
                text.textContent = phase === 0 ? 'شهيق...' : 'زفير...';
            }, 2000);
            
            // إنهاء التمرين بعد دقيقتين
            breathingTimeout = setTimeout(() => {
                stopBreathingTimer();
                message.textContent = 'أنا هنا، أقدّركِ، ولن أكرّر الخطأ ♥';
                showCelebration('تمرين رائع! أشعر بالهدوء معكِ 🧘‍♀️');
            }, 120000);
        }

        function stopBreathingTimer() {
            const circle = document.getElementById('breathingCircle');
            const text = document.getElementById('breathingText');
            
            circle.classList.remove('breathing');
            text.textContent = 'ابدئي';
            
            if (breathingInterval) {
                clearInterval(breathingInterval);
                breathingInterval = null;
            }
            
            if (breathingTimeout) {
                clearTimeout(breathingTimeout);
                breathingTimeout = null;
            }
        }

        // لعبة السحب والإفلات
        function initializeDragAndDrop() {
            const foodItems = document.querySelectorAll('.food-item');
            const oscarCharacter = document.getElementById('oscarCharacter');
            const oscarMessage = document.getElementById('oscarMessage');
            
            foodItems.forEach(item => {
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('dragend', handleDragEnd);
            });
            
            oscarCharacter.addEventListener('dragover', handleDragOver);
            oscarCharacter.addEventListener('drop', handleDrop);
        }

        function handleDragStart(e) {
            e.target.classList.add('dragging');
            e.dataTransfer.setData('text/plain', e.target.dataset.food);
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDrop(e) {
            e.preventDefault();
            const foodType = e.dataTransfer.getData('text/plain');
            
            if (!gameState.oscarFed) {
                gameState.oscarFed = true;
                updateProgressDisplay();
                saveGameState();
                
                const messages = {
                    fish: 'مياو~ السمك لذيذ جداً! شكراً ♥',
                    milk: 'مياو~ الحليب منعش! أحبكِ ♥',
                    treat: 'مياو~ هذه الحلوى رائعة! ♥'
                };
                
                document.getElementById('oscarMessage').textContent = messages[foodType] || 'مياو~ شكراً على الطعام! ♥';
                document.getElementById('oscarCharacter').textContent = '😸';
                
                showCelebration('أوسكار يشكرك! 🐱♥', e.target.getBoundingClientRect());
                
                // إعادة تعيين بعد 5 ثوانِ
                setTimeout(() => {
                    gameState.oscarFed = false;
                    document.getElementById('oscarCharacter').textContent = '🐱';
                    document.getElementById('oscarMessage').textContent = 'أوسكار جائع قليلاً...';
                    saveGameState();
                }, 5000);
            }
        }

        // التنقل السلس
        function smoothScroll(e) {
            const targetSection = e.target.dataset.section;
            const element = document.getElementById(targetSection);
            
            element.scrollIntoView({
                behavior: 'smooth',
                block: 'center'
            });
        }

        // تحديث النقطة النشطة في التنقل
        function updateActiveNavDot() {
            const sections = document.querySelectorAll('section');
            const navDots = document.querySelectorAll('.nav-dot');
            let activeSection = '';
            
            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                if (rect.top <= window.innerHeight / 2 && rect.bottom >= window.innerHeight / 2) {
                    activeSection = section.id;
                }
            });
            
            navDots.forEach(dot => {
                dot.classList.toggle('active', dot.dataset.section === activeSection);
            });
        }

        // تحديث مؤشر التقدم العام
        function updateProgressDisplay() {
            const hearts = document.querySelectorAll('.progress-heart');
            let totalProgress = 0;
            
            // تقدم الأوركيد
            const orchidsCompleted = gameState.orchids.filter(progress => progress === 100).length;
            totalProgress += orchidsCompleted;
            
            // تقدم المهام
            totalProgress += gameState.questsCompleted.length;
            
            // تحديث القلوب
            hearts.forEach((heart, index) => {
                heart.classList.toggle('filled', index < totalProgress);
            });
        }

        // استرجاع تقدم الأوركيد
        function restoreOrchidProgress() {
            gameState.orchids.forEach((progress, index) => {
                const pot = document.querySelector(`[data-orchid="${index}"]`);
                const progressFill = pot.querySelector('.progress-fill');
                const orchidIcon = pot.querySelector('.orchid-icon');
                
                progressFill.style.width = progress + '%';
                if (progress === 100) {
                    orchidIcon.textContent = '🌺';
                }
            });
        }

        // استرجاع تقدم المهام
        function restoreQuestProgress() {
            gameState.questsCompleted.forEach(questIndex => {
                const questItem = document.querySelector(`[data-quest="${questIndex}"]`);
                if (questItem) {
                    questItem.classList.add('completed');
                    questItem.querySelector('.quest-checkbox').textContent = '✓';
                }
            });
        }

        // عرض الاحتفال
        function showCelebration(message, position = null) {
            // إنشاء عنصر الاحتفال
            const celebration = document.createElement('div');
            celebration.className = 'celebration';
            celebration.textContent = message;
            
            // تحديد الموقع
            if (position) {
                celebration.style.left = position.left + position.width / 2 + 'px';
                celebration.style.top = position.top + 'px';
            } else {
                celebration.style.left = '50%';
                celebration.style.top = '50%';
                celebration.style.transform = 'translate(-50%, -50%)';
            }
            
            celebration.style.position = 'fixed';
            celebration.style.zIndex = '9999';
            celebration.style.color = '#e91e63';
            celebration.style.fontWeight = 'bold';
            celebration.style.fontSize = '1.2rem';
            celebration.style.pointerEvents = 'none';
            celebration.style.animation = 'floatUp 2s ease-out forwards';
            
            document.body.appendChild(celebration);
            
            // إضافة قلوب متطايرة
            for (let i = 0; i < 5; i++) {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.innerHTML = '♥';
                heart.style.left = (position ? position.left + Math.random() * position.width : window.innerWidth / 2 + Math.random() * 100 - 50) + 'px';
                heart.style.top = (position ? position.top + Math.random() * position.height : window.innerHeight / 2 + Math.random() * 100 - 50) + 'px';
                heart.style.animationDelay = (Math.random() * 0.5) + 's';
                
                document.body.appendChild(heart);
                
                setTimeout(() => heart.remove(), 3000);
            }
            
            setTimeout(() => celebration.remove(), 2000);
        }

        // إضافة تأثير parallax خفيف
        window.addEventListener('scroll', () => {
            if (!gameState.calmMode) {
                const scrolled = window.pageYOffset;
                const rate = scrolled * -0.2;
                
                document.getElementById('animatedBg').style.transform = `translateY(${rate}px)`;
            }
        });
    </script>
</body>
</html>